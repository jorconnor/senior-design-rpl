{
    "py.line_comments": {
        "text": "# coding: utf-8\n\nclass menuitem:\n    def __init__(self, parent, name, url, active = True, template = None):\n        self.name = name\n        self.url = url\n        self.parent = parent\n        self.active = active # this is an inline comment\n        self.full_url = self.compute_full_url()\n        if template == None:\n            self.template = parent.template + ('' if name == '' else '/' + name)\n        elif template.startswith('/'):\n            self.template = template[1:-1]\n        else:\n            self.template = parent.template + '/' + template\n\n    def compute_full_url(self):\n        if self.url.startswith('http'):\n            return self.url\n        return self.parent.full_url + self.url\n\nclass dummymenuitem(menuitem):\n    def __init__(self):\n        menuitem.__init__(self, rootmenuitem(), name = 'none', url = '')\n\nclass rootmenuitem(menuitem):\n    def __init__(self):\n        menuitem.__init__(self, parent = None, name = '', url = '', active = False, template = '/')\n\n    def compute_full_url(self):\n        return '/'\n\nclass globalmenuitem(menuitem):\n    def __init__(self, name, url, icon, alt, active = True, template = None):\n        menuitem.__init__(self, parent = rootmenuitem(), name = name, url = url, active = active, template = template)\n        self.icon = icon\n        self.alt = alt\n\nclass contentmenuitem(menuitem):\n    def __init__(self, parent, name, url, text, visible = True, cols = 3, template = None):\n        menuitem.__init__(self, parent, name, url, template = template)\n        self.text = text\n        self.cols = cols\n        self.visible = visible\n\ndef find_active_item(path, items):\n    best_fit = None\n    for item in items:\n        if path == item.url.rstrip('/') or path.startswith(item.url):\n            if best_fit is None or len(item.url) > len(best_fit.url):\n                best_fit = item\n    return best_fit or dummymenuitem()\n\ndef menu(path):\n    global_menu = [\n        # globalmenuitem(name = 'home',    url = '',  icon = 'icon-yoursway.png', template = 'index', alt = 'Home'),\n        # globalmenuitem(name = 'consulting', url = 'consulting/', icon = 'icon-consulting.png',  alt = 'Consulting'),\n        globalmenuitem(name = 'consulting', url = '', icon = 'icon-yoursway.png',  alt = 'YourSway'),\n        # globalmenuitem(name = 'ide',     url = 'ide/', active = False, icon = 'icon-ide.png',      alt = 'YourSway IDE'),\n        # globalmenuitem(name = 'taskus',  url = 'taskus/',  icon = 'icon-taskus.png',   alt = 'Taskus'),\n        globalmenuitem(name = 'free', url = 'free/', icon = 'icon-free.png',  alt = 'Free Tools'),\n        globalmenuitem(name = 'aboutus', url = 'aboutus/', icon = 'icon-aboutus.png',  alt = 'About Us'),\n        globalmenuitem(name = 'blog', url = 'http://blog.yoursway.com/', icon = 'icon-blog.png',  alt = 'Blog'),\n    ]\n\n    path = path.lstrip('/')\n\n    active_global_item = find_active_item(path, global_menu)\n    path = path[len(active_global_item.url) : -1]\n\n    if active_global_item.name == 'taskus':\n        content_menu = [\n            contentmenuitem(parent = active_global_item, name = '', url = '', template = 'overview', text = \"5 easy rules\", cols = 4),\n            contentmenuitem(parent = active_global_item, name = 'screencast', url = 'screencast/', text = 'Screencast', cols = 4),\n            contentmenuitem(parent = active_global_item, name = 'qa', url = 'qa/', text = 'Productivity Q&A', cols = 6),\n            contentmenuitem(parent = active_global_item, name = 'support', url = 'support/', text = 'Support', cols = 4),\n        ]\n    elif active_global_item.name == 'free':\n        content_menu = [\n        contentmenuitem(parent = active_global_item, name = '', url = '', template = 'overview', text = \"Overview\", cols = 4),\n        contentmenuitem(parent = active_global_item, name = 'ProjectSync', url = 'ProjectSync/', text = 'ProjectSync', cols = 4),\n        # contentmenuitem(parent = active_global_item, name = 'ide-features', url = 'ide/features', text = '', visible = False),\n        # contentmenuitem(parent = active_global_item, name = 'mashups', url = 'mashups/', text = 'Desktop & Web app', cols = 7),\n        # contentmenuitem(parent = active_global_item, name = 'iphone', url = 'iphone/', text = 'iPhone app', cols = 4),\n        ]\n    elif active_global_item.name == 'consulting':\n        content_menu = [\n        contentmenuitem(parent = active_global_item, name = '', url = '', template = 'overview', text = \"Overview\", cols = 4),\n        contentmenuitem(parent = active_global_item, name = 'ide', url = 'ide/', text = 'I want an IDE', cols = 5),\n        contentmenuitem(parent = active_global_item, name = 'ide-features', url = 'ide/features', text = '', visible = False),\n        contentmenuitem(parent = active_global_item, name = 'mashups', url = 'mashups/', text = 'Desktop & Web app', cols = 7),\n        contentmenuitem(parent = active_global_item, name = 'iphone', url = 'iphone/', text = 'iPhone app', cols = 4),        ]\n    else:\n        content_menu = []\n\n    remaining_content_menu_cols = 23 - sum([item.cols for item in content_menu if item.visible])\n\n    active_content_item = find_active_item(path, content_menu)\n    if isinstance(active_content_item, dummymenuitem):\n        active_item = active_global_item\n    else:\n        active_item = active_content_item\n\n    visible_content_menu_items = [item for item in content_menu if item.visible]\n\n    return (active_item, dict(global_menu = global_menu,\n        content_menu = visible_content_menu_items,\n        active_global_item = active_global_item.name,\n        active_content_item = active_content_item.name,\n        remaining_content_menu_cols = remaining_content_menu_cols,\n    ))\n",
        "pos": 1,
        "subs": [
            {
                "py.line_comment": {
                    "text": "# coding: utf-8",
                    "pos": 1,
                    "subs": [
                        {
                            "py.line_comment_context": {
                                "text": "",
                                "pos": 1
                            }
                        },
                        {
                            "py.line_comment_body": {
                                "text": "# coding: utf-8",
                                "pos": 1,
                                "subs": [
                                    {
                                        "py.line_comment_text": {
                                            "text": " coding: utf-8",
                                            "pos": 2
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            },
            {
                "py.line_comment": {
                    "text": "        self.active = active # this is an inline comment",
                    "pos": 186,
                    "subs": [
                        {
                            "py.line_comment_context": {
                                "text": "        self.active = active ",
                                "pos": 186
                            }
                        },
                        {
                            "py.line_comment_body": {
                                "text": "# this is an inline comment",
                                "pos": 215,
                                "subs": [
                                    {
                                        "py.line_comment_text": {
                                            "text": " this is an inline comment",
                                            "pos": 216
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            },
            {
                "py.line_comment": {
                    "text": "        # globalmenuitem(name = 'home',    url = '',  icon = 'icon-yoursway.png', template = 'index', alt = 'Home'),",
                    "pos": 1926,
                    "subs": [
                        {
                            "py.line_comment_context": {
                                "text": "        ",
                                "pos": 1926
                            }
                        },
                        {
                            "py.line_comment_body": {
                                "text": "# globalmenuitem(name = 'home',    url = '',  icon = 'icon-yoursway.png', template = 'index', alt = 'Home'),",
                                "pos": 1934,
                                "subs": [
                                    {
                                        "py.line_comment_text": {
                                            "text": " globalmenuitem(name = 'home',    url = '',  icon = 'icon-yoursway.png', template = 'index', alt = 'Home'),",
                                            "pos": 1935
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            },
            {
                "py.line_comment": {
                    "text": "        # globalmenuitem(name = 'consulting', url = 'consulting/', icon = 'icon-consulting.png',  alt = 'Consulting'),",
                    "pos": 2043,
                    "subs": [
                        {
                            "py.line_comment_context": {
                                "text": "        ",
                                "pos": 2043
                            }
                        },
                        {
                            "py.line_comment_body": {
                                "text": "# globalmenuitem(name = 'consulting', url = 'consulting/', icon = 'icon-consulting.png',  alt = 'Consulting'),",
                                "pos": 2051,
                                "subs": [
                                    {
                                        "py.line_comment_text": {
                                            "text": " globalmenuitem(name = 'consulting', url = 'consulting/', icon = 'icon-consulting.png',  alt = 'Consulting'),",
                                            "pos": 2052
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            },
            {
                "py.line_comment": {
                    "text": "        # globalmenuitem(name = 'ide',     url = 'ide/', active = False, icon = 'icon-ide.png',      alt = 'YourSway IDE'),",
                    "pos": 2264,
                    "subs": [
                        {
                            "py.line_comment_context": {
                                "text": "        ",
                                "pos": 2264
                            }
                        },
                        {
                            "py.line_comment_body": {
                                "text": "# globalmenuitem(name = 'ide',     url = 'ide/', active = False, icon = 'icon-ide.png',      alt = 'YourSway IDE'),",
                                "pos": 2272,
                                "subs": [
                                    {
                                        "py.line_comment_text": {
                                            "text": " globalmenuitem(name = 'ide',     url = 'ide/', active = False, icon = 'icon-ide.png',      alt = 'YourSway IDE'),",
                                            "pos": 2273
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            },
            {
                "py.line_comment": {
                    "text": "        # globalmenuitem(name = 'taskus',  url = 'taskus/',  icon = 'icon-taskus.png',   alt = 'Taskus'),",
                    "pos": 2388,
                    "subs": [
                        {
                            "py.line_comment_context": {
                                "text": "        ",
                                "pos": 2388
                            }
                        },
                        {
                            "py.line_comment_body": {
                                "text": "# globalmenuitem(name = 'taskus',  url = 'taskus/',  icon = 'icon-taskus.png',   alt = 'Taskus'),",
                                "pos": 2396,
                                "subs": [
                                    {
                                        "py.line_comment_text": {
                                            "text": " globalmenuitem(name = 'taskus',  url = 'taskus/',  icon = 'icon-taskus.png',   alt = 'Taskus'),",
                                            "pos": 2397
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            },
            {
                "py.line_comment": {
                    "text": "        # contentmenuitem(parent = active_global_item, name = 'ide-features', url = 'ide/features', text = '', visible = False),",
                    "pos": 3874,
                    "subs": [
                        {
                            "py.line_comment_context": {
                                "text": "        ",
                                "pos": 3874
                            }
                        },
                        {
                            "py.line_comment_body": {
                                "text": "# contentmenuitem(parent = active_global_item, name = 'ide-features', url = 'ide/features', text = '', visible = False),",
                                "pos": 3882,
                                "subs": [
                                    {
                                        "py.line_comment_text": {
                                            "text": " contentmenuitem(parent = active_global_item, name = 'ide-features', url = 'ide/features', text = '', visible = False),",
                                            "pos": 3883
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            },
            {
                "py.line_comment": {
                    "text": "        # contentmenuitem(parent = active_global_item, name = 'mashups', url = 'mashups/', text = 'Desktop & Web app', cols = 7),",
                    "pos": 4003,
                    "subs": [
                        {
                            "py.line_comment_context": {
                                "text": "        ",
                                "pos": 4003
                            }
                        },
                        {
                            "py.line_comment_body": {
                                "text": "# contentmenuitem(parent = active_global_item, name = 'mashups', url = 'mashups/', text = 'Desktop & Web app', cols = 7),",
                                "pos": 4011,
                                "subs": [
                                    {
                                        "py.line_comment_text": {
                                            "text": " contentmenuitem(parent = active_global_item, name = 'mashups', url = 'mashups/', text = 'Desktop & Web app', cols = 7),",
                                            "pos": 4012
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            },
            {
                "py.line_comment": {
                    "text": "        # contentmenuitem(parent = active_global_item, name = 'iphone', url = 'iphone/', text = 'iPhone app', cols = 4),",
                    "pos": 4133,
                    "subs": [
                        {
                            "py.line_comment_context": {
                                "text": "        ",
                                "pos": 4133
                            }
                        },
                        {
                            "py.line_comment_body": {
                                "text": "# contentmenuitem(parent = active_global_item, name = 'iphone', url = 'iphone/', text = 'iPhone app', cols = 4),",
                                "pos": 4141,
                                "subs": [
                                    {
                                        "py.line_comment_text": {
                                            "text": " contentmenuitem(parent = active_global_item, name = 'iphone', url = 'iphone/', text = 'iPhone app', cols = 4),",
                                            "pos": 4142
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            }
        ]
    }
}
